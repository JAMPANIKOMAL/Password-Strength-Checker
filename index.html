<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Password Strength Checker</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Add any specific animations if needed */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body class="dark-mode">
<div class="container">
    <div class="top-bar">
        <div class="logo-title">
            <!-- Key Symbol SVG -->
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="logo-icon">
                <path d="M15 9L17.5 11.5M17.5 11.5L15 14M17.5 11.5H12.5M12.5 11.5C12.5 14.2614 10.2614 16.5 7.5 16.5C4.73858 16.5 2.5 14.2614 2.5 11.5C2.5 8.73858 4.73858 6.5 7.5 6.5C10.2614 6.5 12.5 8.73858 12.5 11.5ZM21.5 11.5C21.5 14.2614 19.2614 16.5 16.5 16.5C13.7386 16.5 11.5 14.2614 11.5 11.5C11.5 8.73858 13.7386 6.5 16.5 6.5C19.2614 6.5 21.5 8.73858 21.5 11.5Z" stroke="#58a6ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <h1 id="dashboardTitle">Password Strength Checker</h1>
        </div>
        
        <div class="header-controls">
            <div class="toggle-switch">
                <span>Light</span>
                <label class="switch">
                    <input type="checkbox" id="themeToggle" checked>
                    <span class="slider"></span>
                </label>
                <span>Dark</span>
            </div>
            <button id="infoBtn" class="btn-secondary">‚ìò Info</button>
        </div>
    </div>

    <div class="main-content-area">
        <div class="password-input-section card">
            <div class="input-with-icon">
                <input type="password" id="passwordInput" placeholder="Enter your password">
                <button id="togglePasswordVisibility" class="icon-btn">
                    <!-- Eye icon SVG -->
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path id="eyeOpen" d="M2 12S6 4 12 4S22 12 22 12S18 20 12 20S2 12 2 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle id="eyeOpenCircle" cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path id="eyeClosed" style="display:none;" d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-5.4 0-9.94-7-9.94-7A9.01 9.01 0 0 1 8 6.06M2 2L22 2M11.58 3.58A10.07 10.07 0 0 1 12 4c5.4 0 9.94 7 9.94 7a9.01 9.01 0 0 1-1.25 1.72M16 16.01L8 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <line id="eyeClosedLine" style="display:none;" x1="1" y1="1" x2="23" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            <button id="checkPasswordBtn" class="btn-start">Check Password</button>
        </div>

        <div class="strength-bar-container card">
            <div class="strength-bar" id="strengthBar"></div>
            <div class="strength-label" id="strengthLabel">Strength: N/A</div>
        </div>

        <div id="passwordResults" class="password-results-section card">
            <!-- Results will be displayed here -->
            <p class="placeholder-text">Enter a password and click "Check Password" to see the strength analysis.</p>
        </div>

        <div class="advanced-options-section">
            <button id="advancedOptionsBtn" class="btn-secondary">‚öôÔ∏è Advanced Options</button>
            <button id="advancedOptionsInfoBtn" class="btn-secondary info-icon-btn">‚ìò</button>
        </div>
    </div>
</div>

<!-- Info Modal -->
<div id="infoModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>About This Tool</h2>
            <span class="close-button info-close-button">&times;</span>
        </div>
        <div class="modal-body">
            <p>This is a client-side password strength checker. Your password is **NOT** stored, transmitted, or saved anywhere. All checks are performed directly in your browser.</p>
            <p>It helps you create strong passwords by evaluating them against a set of criteria.</p>
        </div>
    </div>
</div>

<!-- Advanced Options Modal -->
<div id="advancedOptionsModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>Advanced Password Rules</h2>
            <span class="close-button advanced-close-button">&times;</span>
        </div>
        <div class="modal-body">
            <p>Customize the minimum requirements for your password here. Set a value of 0 for any character type if you do not want to require it.</p>
            
            <div class="rule-section">
                <h3>Minimum Length</h3>
                <div class="add-rule-form">
                    <input type="number" id="minLengthInput" value="8" min="0">
                    <button class="add-btn apply-rule-btn" data-rule="minLength">Apply</button>
                </div>
            </div>
            <div class="rule-section">
                <h3>Required Character Counts</h3>
                <div class="input-group-rules">
                    <div class="rule-input-item">
                        <label for="minUppercase">Uppercase Letters (A-Z):</label>
                        <input type="number" id="minUppercase" value="1" min="0">
                    </div>
                    <div class="rule-input-item">
                        <label for="minLowercase">Lowercase Letters (a-z):</label>
                        <input type="number" id="minLowercase" value="1" min="0">
                    </div>
                    <div class="rule-input-item">
                        <label for="minNumbers">Numbers (0-9):</label>
                        <input type="number" id="minNumbers" value="1" min="0">
                    </div>
                    <div class="rule-input-item">
                        <label for="minSpecial">Special Characters (!@#$...):</label>
                        <input type="number" id="minSpecial" value="1" min="0">
                    </div>
                </div>
                <button class="btn-start apply-char-rules-btn">Apply Character Rules</button>
            </div>
        </div>
    </div>
</div>

<!-- Advanced Options Info Modal -->
<div id="advancedOptionsInfoModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h2>About Advanced Options</h2>
            <span class="close-button advanced-info-close-button">&times;</span>
        </div>
        <div class="modal-body">
            <p>In Advanced Options, you can define custom rules for your password. This includes setting a minimum overall length and specifying the minimum number of uppercase letters, lowercase letters, numbers, and special characters required.</p>
            <p>Set a value of 0 for any character type if you don't want to enforce that specific requirement.</p>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script>
    $(document).ready(function () {
        // --- Theme Toggle Logic (reused from SIEM project) ---
        const applyTheme = (theme) => {
            $('body').removeClass('dark-mode light-mode').addClass(theme);
            localStorage.setItem('theme', theme);
        };

        $('#themeToggle').on('change', function() {
            if ($(this).is(':checked')) {
                applyTheme('dark-mode');
            } else {
                applyTheme('light-mode');
            }
        });

        // Set initial theme based on localStorage or default to dark
        if (localStorage.getItem('theme') === 'light-mode') {
            $('#themeToggle').prop('checked', false);
            applyTheme('light-mode');
        } else {
            $('#themeToggle').prop('checked', true);
            applyTheme('dark-mode');
        }

        // --- Modals Logic ---
        const infoModal = $('#infoModal');
        const advancedOptionsModal = $('#advancedOptionsModal');
        const advancedOptionsInfoModal = $('#advancedOptionsInfoModal'); // New modal

        $('#infoBtn').on('click', () => infoModal.show());
        $('.info-close-button').on('click', () => infoModal.hide());

        $('#advancedOptionsBtn').on('click', () => advancedOptionsModal.show());
        $('.advanced-close-button').on('click', () => advancedOptionsModal.hide());

        $('#advancedOptionsInfoBtn').on('click', () => advancedOptionsInfoModal.show()); // New info button handler
        $('.advanced-info-close-button').on('click', () => advancedOptionsInfoModal.hide()); // New info modal close handler

        // Close modals when clicking outside
        $(window).on('click', (event) => {
            if ($(event.target).is(infoModal)) {
                infoModal.hide();
            }
            if ($(event.target).is(advancedOptionsModal)) {
                advancedOptionsModal.hide();
            }
            if ($(event.target).is(advancedOptionsInfoModal)) { // New modal
                advancedOptionsInfoModal.hide();
            }
        });

        // --- Password Visibility Toggle ---
        $('#togglePasswordVisibility').on('click', function() {
            const passwordInput = $('#passwordInput');
            const eyeOpen = $('#eyeOpen, #eyeOpenCircle');
            const eyeClosed = $('#eyeClosed, #eyeClosedLine');

            if (passwordInput.attr('type') === 'password') {
                passwordInput.attr('type', 'text');
                eyeOpen.hide();
                eyeClosed.show();
            } else {
                passwordInput.attr('type', 'password');
                eyeOpen.show();
                eyeClosed.hide();
            }
        });

        // --- Password Checking Logic ---
        let currentRules = {
            minLength: 8,
            minUppercase: 1,
            minLowercase: 1,
            minNumbers: 1,
            minSpecial: 1
        };

        const updateStrengthBar = (score) => {
            const strengthBar = $('#strengthBar');
            const strengthLabel = $('#strengthLabel');
            // Calculate max possible score based on active rules
            let maxScore = 0;
            if (currentRules.minLength > 0) maxScore++;
            if (currentRules.minUppercase > 0) maxScore++;
            if (currentRules.minLowercase > 0) maxScore++;
            if (currentRules.minNumbers > 0) maxScore++;
            if (currentRules.minSpecial > 0) maxScore++;

            let width = (maxScore === 0) ? 0 : (score / maxScore) * 100; 
            let color = 'var(--red)';
            let label = 'Strength: N/A';

            if (score === 0 && maxScore > 0) {
                label = 'Strength: Very Weak';
            } else if (score / maxScore <= 0.2) {
                color = 'var(--red)';
                label = 'Strength: Weak';
            } else if (score / maxScore <= 0.6) {
                color = 'var(--orange)';
                label = 'Strength: Fair';
            } else if (score / maxScore <= 0.8) {
                color = 'var(--primary)'; // Blue
                label = 'Strength: Good';
            } else if (score / maxScore < 1) {
                color = 'var(--green)';
                label = 'Strength: Strong';
            } else if (score === maxScore && maxScore > 0) {
                color = 'var(--green)';
                label = 'Strength: Very Strong! üí™';
            }

            strengthBar.css({
                width: `${width}%`,
                backgroundColor: color
            });
            strengthLabel.text(label);
        };

        const checkPasswordStrength = () => {
            const password = $('#passwordInput').val();
            const resultsDiv = $('#passwordResults');
            resultsDiv.empty(); // Clear previous results

            if (password.length === 0) {
                resultsDiv.append('<p class="placeholder-text">Enter a password and click "Check Password" to see the strength analysis.</p>');
                updateStrengthBar(0); // Reset strength bar
                return;
            }

            let passedChecksCount = 0;

            // Character counters
            let uppercaseCount = (password.match(/[A-Z]/g) || []).length;
            let lowercaseCount = (password.match(/[a-z]/g) || []).length;
            let numberCount = (password.match(/[0-9]/g) || []).length;
            let specialCount = (password.match(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~` ]/g) || []).length;

            const checks = [
                {
                    name: `Minimum length of ${currentRules.minLength} characters`,
                    check: (pwd) => pwd.length >= currentRules.minLength,
                    active: currentRules.minLength > 0
                },
                {
                    name: `At least ${currentRules.minUppercase} uppercase letter(s) (A-Z)`,
                    check: () => uppercaseCount >= currentRules.minUppercase,
                    active: currentRules.minUppercase > 0
                },
                {
                    name: `At least ${currentRules.minLowercase} lowercase letter(s) (a-z)`,
                    check: () => lowercaseCount >= currentRules.minLowercase,
                    active: currentRules.minLowercase > 0
                },
                {
                    name: `At least ${currentRules.minNumbers} number(s) (0-9)`,
                    check: () => numberCount >= currentRules.minNumbers,
                    active: currentRules.minNumbers > 0
                },
                {
                    name: `At least ${currentRules.minSpecial} special character(s) (!@#$...)`,
                    check: () => specialCount >= currentRules.minSpecial,
                    active: currentRules.minSpecial > 0
                }
            ];

            let allChecksPassed = true;
            checks.forEach(rule => {
                if (rule.active) { // Only check if the rule is active (min count > 0)
                    const passed = rule.check(password);
                    const icon = passed ? '‚úîÔ∏è' : '‚ùå';
                    const className = passed ? 'success-text' : 'error-text';
                    resultsDiv.append(`<p class="${className}">${icon} ${rule.name}</p>`);
                    if (passed) {
                        passedChecksCount++;
                    } else {
                        allChecksPassed = false;
                    }
                }
            });

            if (allChecksPassed && passedChecksCount > 0) { // Ensure at least one rule was active and passed
                resultsDiv.prepend('<p class="overall-strength success-text">Password is Strong! üí™</p>');
            } else if (passedChecksCount > 0) {
                 resultsDiv.prepend('<p class="overall-strength error-text">Password needs improvement. üòü</p>');
            } else {
                resultsDiv.prepend('<p class="overall-strength error-text">Password is Very Weak. üòü</p>');
            }
            updateStrengthBar(passedChecksCount);
        };

        $('#checkPasswordBtn').on('click', checkPasswordStrength);
        $('#passwordInput').on('keyup', checkPasswordStrength); // Check on keyup for real-time feedback

        // --- Advanced Options Logic ---
        const loadAdvancedRules = () => {
            $('#minLengthInput').val(currentRules.minLength);
            $('#minUppercase').val(currentRules.minUppercase);
            $('#minLowercase').val(currentRules.minLowercase);
            $('#minNumbers').val(currentRules.minNumbers);
            $('#minSpecial').val(currentRules.minSpecial);
        };

        $('.apply-rule-btn').on('click', function() {
            const ruleType = $(this).data('rule');
            if (ruleType === 'minLength') {
                const value = parseInt($('#minLengthInput').val());
                if (!isNaN(value) && value >= 0) { // Allow 0 for no min length
                    currentRules.minLength = value;
                    // alert('Minimum length rule applied!'); // Removed alert for smoother UX
                } else {
                    // alert('Please enter a valid minimum length (a non-negative number).'); // Removed alert
                }
            }
            checkPasswordStrength(); // Re-check password with new rules
            advancedOptionsModal.hide(); // Hide modal after applying
        });

        $('.apply-char-rules-btn').on('click', function() {
            currentRules.minUppercase = parseInt($('#minUppercase').val()) || 0;
            currentRules.minLowercase = parseInt($('#minLowercase').val()) || 0;
            currentRules.minNumbers = parseInt($('#minNumbers').val()) || 0;
            currentRules.minSpecial = parseInt($('#minSpecial').val()) || 0;
            // alert('Character type rules applied!'); // Removed alert
            checkPasswordStrength(); // Re-check password with new rules
            advancedOptionsModal.hide(); // Hide modal after applying
        });

        // Load rules when advanced options modal is opened
        $('#advancedOptionsBtn').on('click', loadAdvancedRules);

        // Initial check for empty password input
        checkPasswordStrength();
    });
</script>
